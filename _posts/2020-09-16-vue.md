---
title: vue
author: jyy
date: 2020-09-16 11:00:00 +0800
# categories: [Blogging, Tutorial]
tags: [vue]
pin: true
---

## vue是一个什么样的框架
> 它借鉴了MVVM框架，但是和他并不完全一样。相同之处都是数据变化视图会更新，视图变化数据会被影响（响应式数据原理）。不同之处是MVVM不能跳过数据去直接更新视图，而vue可以通过操作dom来更新视图

> MVVM模型的组成部分
- model（模型）：模型是指代表真实状态内容的领域模型（面向对象），或指代表内容的数据访问层（以数据为中心）。
- view（视图）：视图是用户在屏幕上看到的结构、布局和外观（UI）
- viewModel（视图模型）：
- binder（绑定器）

## 1.对数据的劫持
> 主要是依赖Object.defineProperty来实现的。

#### 对数据（数组和对象）的劫持
```js
        let data = {
            a: { b: 10 , c: [1,2,3]}
        }
        observe(data)
        function observe(data) {
            if (typeof data !== "object") {
                return data;
            }
            if (Array.isArray(data)) {
                observeArray(data) //观测数组中的对象类型
            } else {
                walk(data)
            }
        }
       function observeArray(data) {
            data.forEach(item => {
                observe(item)
            })
        }
        function walk(data) {
            let keys = Object.keys(data)
            keys.forEach(key => {
                defineReactive(data, key, data[key])
            })
        }
        function defineReactive(data, key, value) {
            observe(value)
            Object.defineProperty(data, key, {
                get() {
                    console.log(`读取了${key}属性`)
                    return value
                },
                set(newValue) {
                    console.log(`设置了${key}属性`)
                    if (newValue == value) return
                    value = newValue
                }
            })
        }
        console.log(data)
```
