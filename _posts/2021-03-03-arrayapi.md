---
title: 数组api
author: jyy
date: 2021-03-03 14:30:00 +0800
# categories: [Blogging, Tutorial]
tags: [js]
pin: true
---

## forEach

```js
let arr = [1,2,3]
Array.prototype.myForEach = function(cb){
    for(let i=0; i<this.length; i++){
        cb(this[i],i)
    }
}
arr.myForEach(item => console.log(item))
```

## map

```js
let arr = [1,2,3]
Array.prototype.mymap = function(cb){
    let arr1 = []
    for(let i=0; i < this.length; i++){
        arr1[i] = cb(this[i],i)
    }
    return arr1
}
let newarr = arr.mymap(item => {
    return item + 1
})
console.log(newarr)
```

## some
> 判断数组中的每一项，如果有一项满足条件，就返回true

```js
let arr = [1,2,3]
Array.prototype.mysome = function(cb){
    let result = false
    for(let i = 0; i < this.length; i++){
        result = cb(this[i])
        if(result){
            break;
        }
    }
    return result
}
let a = arr.mysome(item => item > 3)
console.log(a)
```

## reduce

```js
let arr = [1,2,3]
Array.prototype.myreduce = function(cb, initdata) {
    let prev = initdata
    let i = 0
    if(!initdata){
        i = 1;
        prev = this[0]
    }
    for(i; i < this.length; i++){
        prev = cb(prev, this[i], i)
    }
    return prev
}
let sum = arr.reduce((prev,cur) => {
    return prev + cur
})
console.log(sum)
```

## reduceRight
> 从右往左对数组的元素进行两两操作

```js
let arr = [1,2,3]
Array.prototype.myreduceRight = function(cb, initdata) {
    let prev = initdata
    let i = this.length - 1
    if(!initdata){
        i = this.length - 2
        prev = this[this.length - 1]
    }
    for(i; i >= 0; i--){
        prev = cb(prev, this[i], i)
    }
    return prev
}
let sum = arr.myreduceRight((prev, cur)=>{
    return prev + cur
})
console.log(sum)
```

## flat
> 数组扁平化

```js
let arr = [["a","s"],["d",["c","m"]]]
const myflat = function(arr) {
    let newarr = []
    for(let i = 0; i < arr.length; i++){
        if(Array.isArray(arr[i])){
            newarr = newarr.concat(myflat(arr[i]))
        }else{
            newarr = newarr.concat(arr[i])
        }
    }
    return newarr
}
console.log(myflat(arr))
```
