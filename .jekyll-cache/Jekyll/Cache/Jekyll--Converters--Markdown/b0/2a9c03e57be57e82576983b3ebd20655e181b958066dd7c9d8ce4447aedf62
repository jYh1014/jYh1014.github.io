I"òo<ul id="markdown-toc">
  <li><a href="#webpackæºç ä¹‹tapable" id="markdown-toc-webpackæºç ä¹‹tapable"><strong>webpackæºç ä¹‹tapable</strong></a></li>
  <li><a href="#webpackæºç ä¹‹loader" id="markdown-toc-webpackæºç ä¹‹loader"><strong>webpackæºç ä¹‹loader</strong></a></li>
</ul>

<hr />

<p>title: webpackæºç 
author: jyy
date: 2020-04-20 11:20:00 +0800
tags: [webpack]
pin: true
â€”</p>

<h2 id="webpackæºç ä¹‹tapable"><strong>webpackæºç ä¹‹tapable</strong></h2>

<ul>
  <li>è¦æƒ³äº†è§£webpackæºç ï¼Œé‚£è¦æå‰äº†è§£ä¸€ä¸‹å…¶ç›¸å…³çŸ¥è¯†ã€‚æ¯”å¦‚æ’ä»¶çš„æ‰§è¡Œæœºåˆ¶å…¶å®å°±æ˜¯ä¸€ç§å‘å¸ƒè®¢é˜…çš„æ¨¡å¼ï¼Œåœ¨æ’ä»¶é‡Œé¢æ³¨å†Œç›‘å¬äº‹ä»¶ï¼Œç„¶ååœ¨webpackæºç é‡Œç›¸åº”çš„æ—¶æœºå»è§¦å‘è¿™ä¸ªäº‹ä»¶ã€‚</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td> --><td class="rouge-code"><pre><span class="kd">const</span> <span class="p">{</span> <span class="nx">SyncHook</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">tapable</span><span class="dl">"</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">syncHook</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SyncHook</span><span class="p">([</span><span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">age</span><span class="dl">"</span><span class="p">])</span>
<span class="nx">syncHook</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span>
<span class="p">})</span>
<span class="nx">syncHook</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="dl">"</span><span class="s2">jyy</span><span class="dl">"</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="webpackæºç ä¹‹loader"><strong>webpackæºç ä¹‹loader</strong></h2>

<ul>
  <li>ä¸ºä»€ä¹ˆéœ€è¦loaderï¼Ÿå› ä¸ºwebpackè¿è¡Œåœ¨nodeç¯å¢ƒä¸­ï¼Œåªèƒ½è¯†åˆ«jsæ¨¡å—ï¼Œå¯¹äºcssä»¥åŠjsxåç¼€çš„æ–‡ä»¶ä»¥åŠå›¾ç‰‡å®ƒéƒ½ä¸èƒ½è¯†åˆ«ï¼Œè¿™ä¸ªæ—¶å€™loaderå°±å‡ºç°äº†ï¼Œå®ƒçš„å­˜åœ¨å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚loaderçš„ä½œç”¨å°±æ˜¯èƒ½å°†æºä»£ç è½¬åŒ–æˆwebpackå¯è¯†åˆ«çš„æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯è¯´loaderæœ€åè¾“å‡ºçš„æ˜¯ä¸€æ®µjsä»£ç ã€‚</li>
  <li>ä»€ä¹ˆæ˜¯loaderï¼Ÿå› ä¸ºæˆ‘ä»¬webpackæ‰€æœ‰çš„é…ç½®éƒ½æ˜¯è¿è¡Œåœ¨nodeç¯å¢ƒä¸­ï¼Œæ‰€ä»¥loaderå…¶å®å°±æ˜¯nodeæ¨¡å—ï¼Œä¹Ÿå°±æ˜¯è¯´å°†æ¥è¿™ä¸ªloaderæ˜¯è¦ç»™webpackç”¨çš„ã€‚é‚£æˆ‘ä»¬åœ¨è‡ªå®šä¹‰loaderçš„æ—¶å€™å°±è¦æ³¨æ„ä¸€ä¸‹è¦éµå¾ªcommonjsè§„èŒƒï¼Œä¸èƒ½ä½¿ç”¨esmçš„è¯­æ³•ã€‚æœ¬è´¨ä¸Šä¸€ä¸ªloaderæ¨¡å—å¯¼å‡ºçš„å°±æ˜¯ä¸€ä¸ªå‡½æ•°,çœ‹ä¸‹é¢ä»£ç ï¼Œè¿™ä¸ªå°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„loaderã€‚</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td> --><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">loader</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//sourceæ˜¯æºæ–‡ä»¶ä»£ç ï¼Œæ˜¯å­—ç¬¦ä¸²æˆ–è€…æ˜¯bufferæ ¼å¼ã€‚</span>
    <span class="k">return</span> <span class="nx">source</span>
<span class="p">}</span>
<span class="nx">modules</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">loader</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<ul>
  <li>ä¸€ä¸ªçœŸæ­£çš„loaderåŒ…å«ä¸¤éƒ¨åˆ†ï¼Œpitchå‡½æ•°å’Œnormalå‡½æ•°ï¼Œä¸€èˆ¬pitchå‡½æ•°å¯ä»¥çœç•¥ä¸å†™ï¼Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­æ¥çœ‹ä¸€ä¸‹pitchå‡½æ•°çš„å­˜åœ¨å¯¹æ•´ä¸ªloaderæ‰§è¡Œé¡ºåºçš„å½±å“ã€‚æˆ‘ä»¬è‡ªå®šä¹‰ä¸‰ä¸ªloaderï¼Œloader1ã€loader2å’Œloader3ã€‚ç„¶ååœ¨webpacké…ç½®é‡Œé¢åŠ ä¸Šè¿™å‡ ä¸ªloaderï¼Œè¦æ³¨æ„ä¸€ä¸‹ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œwebpackä¼šå»node_modulesæ–‡ä»¶å¤¹é‡Œé¢æ‰¾loaderï¼Œä½†æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„loaderæ˜¯åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹,éœ€è¦é…ç½®ä¸€ä¸‹resolveLoaderã€‚
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td> --><td class="rouge-code"><pre>â”œâ”€â”€ dist
â”‚   â”œâ”€â”€ app.js
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ loaders
â”‚   â”œâ”€â”€ loader1.js
â”‚   â”œâ”€â”€ loader2.js
â”‚   â””â”€â”€ loader3.js
â”œâ”€â”€ package.json
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ index.less
â”‚   â”œâ”€â”€ main.js
â”‚   â””â”€â”€ test.js
â””â”€â”€ webpack.config.js
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td> --><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">loader1</span><span class="p">(</span><span class="nx">source</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">source</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">===loader1===</span><span class="dl">"</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">loader1</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td> --><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">loader2</span><span class="p">(</span><span class="nx">source</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">source</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">===loader2===</span><span class="dl">"</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">loader2</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td> --><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">loader3</span><span class="p">(</span><span class="nx">source</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">source</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">===loader3===</span><span class="dl">"</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">loader3</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td> --><td class="rouge-code"><pre><span class="c1">//webpack.config.jsæ–‡ä»¶</span>
<span class="kd">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">)</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">mode</span><span class="p">:</span> <span class="dl">"</span><span class="s2">development</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">entry</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">app</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./src/main.js</span><span class="dl">"</span>
    <span class="p">},</span>
    <span class="na">output</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">path</span><span class="p">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">"</span><span class="s2">dist</span><span class="dl">"</span><span class="p">),</span>
        <span class="na">filename</span><span class="p">:</span> <span class="dl">"</span><span class="s2">[name].js</span><span class="dl">"</span>
    <span class="p">},</span>
    <span class="na">resolveLoader</span><span class="p">:</span> <span class="p">{</span>
        <span class="c1">//å¦‚æœåœ¨node_modulesæ–‡ä»¶å¤¹é‡Œé¢æ‰¾ä¸åˆ°ï¼Œé‚£å°±å»loadersæ–‡ä»¶å¤¹é‡Œé¢æ‰¾</span>
        <span class="na">modules</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">node_modules</span><span class="dl">"</span><span class="p">,</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="dl">"</span><span class="s2">loaders</span><span class="dl">"</span><span class="p">)]</span>
    <span class="p">},</span>
    <span class="na">module</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">rules</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">js$/</span><span class="p">,</span>
                <span class="na">use</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">loader1</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">loader2</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">loader3</span><span class="dl">"</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>
<blockquote>
  <p>æ‰§è¡Œnpm run buildå‘½ä»¤ï¼Œçœ‹ä¸€ä¸‹loaderçš„è¾“å‡ºé¡ºåºã€‚loader3 -ã€‹loader2 -ã€‹loader1ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯ä»å³å‘å·¦æ‰§è¡Œçš„ã€‚</p>
</blockquote>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td> --><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="o">===</span><span class="nx">loader3</span><span class="o">===</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="o">===</span><span class="nx">loader2</span><span class="o">===</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="o">===</span><span class="nx">loader1</span><span class="o">===</span>
<span class="c1">//console.log(1);è¿™ä¸ªæ˜¯mian.jsæºæ–‡ä»¶å†…å®¹ã€‚</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>ä¸Šé¢çš„æƒ…å†µæ²¡æœ‰æ·»åŠ pitchï¼Œä¸‹é¢æˆ‘ä»¬åŠ ä¸Šä¹‹åçœ‹çœ‹pitchå‡½æ•°ä»¥åŠloaderï¼ˆnormal-loaderï¼‰çš„æ‰§è¡Œé¡ºåºã€‚pitchç¬¬ä¸€ä¸ªå‚æ•°çš„æ„æ€æ˜¯å‰©ä¸‹çš„loaderï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¹‹å‰çš„loaderï¼Œæ¯”å¦‚ä½ åœ¨loader2çš„pitchå‡½æ•°ä¸­è¿”å›äº†æŸä¸ªå€¼ï¼Œé‚£remainingRequestå°±æ˜¯loader3ï¼ŒpreviousRequestå°±æ˜¯loader1ã€‚</p>
</blockquote>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td> --><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">loader1</span><span class="p">(</span><span class="nx">source</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">source</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">===loader1===</span><span class="dl">"</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">loader1</span><span class="p">.</span><span class="nx">pitch</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">remainingRequest</span><span class="p">,</span><span class="nx">previousRequest</span><span class="p">,</span><span class="nx">data</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">===pitch1===</span><span class="dl">"</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">loader1</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td> --><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">loader2</span><span class="p">(</span><span class="nx">source</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">source</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">===loader2===</span><span class="dl">"</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">loader2</span><span class="p">.</span><span class="nx">pitch</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">remainingRequest</span><span class="p">,</span><span class="nx">previousRequest</span><span class="p">,</span><span class="nx">data</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">===pitch2===</span><span class="dl">"</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">loader2</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td> --><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">loader3</span><span class="p">(</span><span class="nx">source</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">source</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">===loader3===</span><span class="dl">"</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">loader3</span><span class="p">.</span><span class="nx">pitch</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">remainingRequest</span><span class="p">,</span><span class="nx">previousRequest</span><span class="p">,</span><span class="nx">data</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">===pitch3===</span><span class="dl">"</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">loader3</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>buildä¹‹åï¼Œçœ‹åˆ°è¾“å‡ºç»“æœæ˜¯è¿™æ ·çš„,ä¹Ÿå°±æ˜¯è¯´pitchå‡½æ•°æ˜¯ä»å·¦å‘å³æ‰§è¡Œçš„ã€‚å¦‚æœpitchå‡½æ•°æœ‰è¿”å›å€¼çš„è¯ï¼Œé‚£å°±ä¸­æ–­loaderçš„æ‰§è¡Œï¼Œè½¬è€Œå»æ‰§è¡Œä¸Šä¸€ä¸ªloaderï¼Œè¿˜æŠŠè¿”å›å€¼ä½œä¸ºå‚æ•°ä¼ ç»™è¿™ä¸ªloaderã€‚</p>
</blockquote>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td> --><td class="rouge-code"><pre><span class="o">===</span><span class="nx">pitch1</span><span class="o">===</span>
<span class="o">===</span><span class="nx">pitch2</span><span class="o">===</span>
<span class="o">===</span><span class="nx">pitch3</span><span class="o">===</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="o">===</span><span class="nx">loader3</span><span class="o">===</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="o">===</span><span class="nx">loader2</span><span class="o">===</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="o">===</span><span class="nx">loader1</span><span class="o">===</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p><img src="/assets/img/sample/webpackym-1.jpeg" alt="diff" />
<img src="/assets/img/sample/webpackym-2.jpeg" alt="diff" /></p>

<ul>
  <li>loaderåˆ†ä¸º4ç§ï¼Œpreã€normalã€inlineã€postã€‚ä¼˜å…ˆçº§é¡ºåºå°±æ˜¯preã€normalã€inlineã€postã€‚å¦‚æœæœ‰pitchçš„è¯ï¼Œé‚£pitchçš„æ‰§è¡Œé¡ºåºå’Œloaderçš„ç›¸åã€‚
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td> --><td class="rouge-code"><pre><span class="c1">//webpack.config.js</span>
<span class="p">{</span>
  <span class="nl">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">js$/</span><span class="p">,</span>
  <span class="nx">enforce</span><span class="p">:</span> <span class="dl">"</span><span class="s2">pre</span><span class="dl">"</span> <span class="p">,</span>
  <span class="nx">use</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">pre-loader1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pre-loader2</span><span class="dl">"</span><span class="p">]</span>
<span class="p">},</span>
<span class="p">{</span>
  <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">js$/</span><span class="p">,</span>
  <span class="na">enforce</span><span class="p">:</span> <span class="dl">"</span><span class="s2">post</span><span class="dl">"</span> <span class="p">,</span>
  <span class="na">use</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">post-loader1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">post-loader2</span><span class="dl">"</span><span class="p">]</span>
<span class="p">},</span>
<span class="p">{</span>
  <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">js$/</span><span class="p">,</span>
  <span class="na">use</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">normal-loader1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">normal-loader2</span><span class="dl">"</span><span class="p">]</span>
<span class="p">},</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td> --><td class="rouge-code"><pre><span class="c1">//main.js</span>
<span class="k">import</span> <span class="dl">"</span><span class="s2">inline-loader1!inline-loader2!./test.js</span><span class="dl">"</span> <span class="c1">//è¡Œå†…loader</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
    <blockquote>
      <p>buildåç»“æœå¦‚ä¸‹</p>
    </blockquote>
  </li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td> --><td class="rouge-code"><pre><span class="o">===</span><span class="nx">post1</span><span class="o">-</span><span class="nx">pitch</span><span class="o">===</span>
<span class="o">===</span><span class="nx">post2</span><span class="o">-</span><span class="nx">pitch</span><span class="o">===</span>
<span class="o">===</span><span class="nx">normal1</span><span class="o">-</span><span class="nx">pitch</span><span class="o">===</span>
<span class="o">===</span><span class="nx">normal2</span><span class="o">-</span><span class="nx">pitch</span><span class="o">===</span>
<span class="o">===</span><span class="nx">pre1</span><span class="o">-</span><span class="nx">pitch</span><span class="o">===</span>
<span class="o">===</span><span class="nx">pre2</span><span class="o">-</span><span class="nx">pitch</span><span class="o">===</span>
<span class="nx">pre</span><span class="o">-</span><span class="nx">loader2</span>
<span class="nx">pre</span><span class="o">-</span><span class="nx">loader1</span>
<span class="nx">normal</span><span class="o">-</span><span class="nx">loader2</span>
<span class="nx">normal</span><span class="o">-</span><span class="nx">loader1</span>
<span class="nx">post</span><span class="o">-</span><span class="nx">loader2</span>
<span class="nx">post</span><span class="o">-</span><span class="nx">loader1</span> <span class="c1">//åˆ°è¿™ä¸€è¡Œæ˜¯å¯¹main.jsæ–‡ä»¶è¿›è¡Œloaderè§£æçš„æ‰§è¡Œç»“æœï¼Œä¸‹é¢æ˜¯å¯¹testã€‚jsæ–‡ä»¶è§£æçš„ç»“æœ</span>
<span class="o">===</span><span class="nx">post1</span><span class="o">-</span><span class="nx">pitch</span><span class="o">===</span>
<span class="o">===</span><span class="nx">post2</span><span class="o">-</span><span class="nx">pitch</span><span class="o">===</span>
<span class="o">===</span><span class="nx">inline1</span><span class="o">-</span><span class="nx">pitch</span><span class="o">===</span>
<span class="o">===</span><span class="nx">inline2</span><span class="o">-</span><span class="nx">pitch</span><span class="o">===</span>
<span class="o">===</span><span class="nx">normal1</span><span class="o">-</span><span class="nx">pitch</span><span class="o">===</span>
<span class="o">===</span><span class="nx">normal2</span><span class="o">-</span><span class="nx">pitch</span><span class="o">===</span>
<span class="o">===</span><span class="nx">pre1</span><span class="o">-</span><span class="nx">pitch</span><span class="o">===</span>
<span class="o">===</span><span class="nx">pre2</span><span class="o">-</span><span class="nx">pitch</span><span class="o">===</span>
<span class="nx">pre</span><span class="o">-</span><span class="nx">loader2</span>
<span class="nx">pre</span><span class="o">-</span><span class="nx">loader1</span>
<span class="nx">normal</span><span class="o">-</span><span class="nx">loader2</span>
<span class="nx">normal</span><span class="o">-</span><span class="nx">loader1</span>
<span class="nx">inline</span><span class="o">-</span><span class="nx">loader2</span>
<span class="nx">inline</span><span class="o">-</span><span class="nx">loader1</span>
<span class="nx">post</span><span class="o">-</span><span class="nx">loader2</span>
<span class="nx">post</span><span class="o">-</span><span class="nx">loader1</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<ul>
  <li>ä¸‹é¢æˆ‘ä»¬æ¥å…·ä½“å†™ä¸€ä¸ªå°ä¾‹å­,æˆ‘ä»¬åœ¨mainæ–‡ä»¶é‡Œå¼•å…¥testæ–‡ä»¶ï¼Œæˆ‘ä»¬æƒ³è¦æ‹¿åˆ°testæ–‡ä»¶å¯¼å‡ºçš„å†…å®¹ã€‚
```js
//main.js
import a from â€œloader1!./test.jsâ€
console.log(a)</li>
</ul>

<p>//test.js
â€œæˆ‘æ˜¯test.jsâ€</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td> --><td class="rouge-code"><pre>```js
function loader1(source){
    console.log(source + "===loader1===")
    return source
}
module.exports = loader1
</pre></td></tr></tbody></table></code></pre></div></div>
<blockquote>
  <p>å¦‚æœæˆ‘ä»¬è¿™æ ·å†™çš„ç›´æ¥è¾“å‡ºsourceçš„è¯ï¼Œé‚£açš„å€¼å°±æ˜¯ç©ºçš„ã€‚ä¹Ÿå°±æ˜¯è¯´testæ–‡ä»¶å¹¶æ²¡æœ‰å¯¼å‡ºä»»ä½•å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ç°åœ¨testæ–‡ä»¶è¢«loaderè½¬åŒ–åå†…å®¹æ˜¯â€test.jsâ€ï¼Œå¹¶æ²¡æœ‰ä»»ä½•å¯¼å‡ºçš„jsä»£ç ã€‚é‚£æˆ‘ä»¬åŠ ä¸Šå¯¼å‡ºä»£ç æ”¹æˆä¸‹é¢è¿™æ ·è¯•è¯•ã€‚</p>
</blockquote>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td> --><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">loader1</span><span class="p">(</span><span class="nx">source</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">source</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">===loader1===</span><span class="dl">"</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">`module.exports=</span><span class="p">${</span><span class="nx">source</span><span class="p">}</span><span class="s2">`</span>
<span class="p">}</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">loader1</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<blockquote>
  <p>è¿™æ ·testæ–‡ä»¶è¢«è½¬åŒ–æˆäº†â€œmodule.exports=test.jsâ€ï¼Œé‚£æˆ‘ä»¬importè¿™ä¸ªæ–‡ä»¶ï¼Œå°±èƒ½æ‹¿åˆ°å…¶å¯¼å‡ºçš„å€¼å°±æ˜¯â€œæˆ‘æ˜¯test.jsâ€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡ä½ æ˜¯å‡ ä¸ªloaderç»„åˆä½¿ç”¨çš„ï¼Œæœ€åæ‰§è¡Œçš„é‚£ä¸ªloaderè¾“å‡ºçš„å€¼è¦åŠ ä¸Šmodule.exportsï¼Œä¸ç„¶åˆ«çš„æ¨¡å—å°†æ‹¿ä¸åˆ°å…¶å¯¼å‡ºå€¼ã€‚</p>
</blockquote>

<ul>
  <li>å†…è” loader å¯ä»¥é€šè¿‡æ·»åŠ ä¸åŒå‰ç¼€ï¼Œè·³è¿‡å…¶ä»–ç±»å‹ loaderã€‚</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">!</code> è·³è¿‡ normal loaderã€‚
<code class="language-plaintext highlighter-rouge">-!</code> è·³è¿‡ pre å’Œ normal loaderã€‚
<code class="language-plaintext highlighter-rouge">!!</code> è·³è¿‡ preã€ normal å’Œ post loaderã€‚</p>
:ET